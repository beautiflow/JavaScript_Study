<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    
    <!--checkbox로 항목 만들기--> 
    <div style="float: left; width: 5%; padding:10px;">
        <form>
            <input type="checkbox" name="total" onclick="selectAll()"/>전체 <br>
            <input type="checkbox" name="sports" value="농구" onclick="inputbox()"/>농구 <br>
            <input type="checkbox" name="sports" value="배구" onclick="inputbox()"/>배구 <br>
            <input type="checkbox" name="sports" value="야구" onclick="inputbox()"/>야구 <br>
            <input type="checkbox" name="sports" value="축구" onclick="inputbox()"/>축구 <br>
        </form>
    </div>

    <!--입력 칸 만들기--> 
    <div style="float: left; width: 5%; padding:10px;">
        <textarea name="textarea" id="textarea" cols="30" rows="10"></textarea>
    </div>

    <script>
        // html 에서 요소 가져오기
        var total = document.getElementsByName("total");
        var sportsBox = document.getElementsByName("sports");

        widow.onload = ()=>{
            inputbox();
            selectAll();
        }

        widow.onload = function(){
            inputbox();
            selectAll();
        }

        const a = new inputbox();

        
        a.c

        // 하나씩 체크하면 textarea 에 입력되는 함수
        function inputbox(){
            var count = 0;
            var box = [];

            this.c = 1;

            for(i = 0; i < sportsBox.length; i++){
                if(sportsBox[i].checked){
                    box.push(sportsBox[i].value);
                    // 모든 항목이 다 선택되었을 때 전체 checkbox 체크하기
                    count++;
                    if(count == sportsBox.length){
                    total[0].checked = true;
                    }
                }

                // 부분 취소할 경우 전체 checkbox 해제
                if(sportsBox[i].checked == false){
                    total[0].checked = false;
                }
            }
            document.getElementById("textarea").innerHTML = box;
        }

        // 전체 checkbox 체크하면 모든 항목이 선택되고 모든 항목이 textarea 에 입력되는 함수
        function selectAll(){
            var box = [];

            // 전체 체크가 true 이면 모든 항목들 다 체크 후 박스에 넣기
            for(i = 0; i < sportsBox.length; i++){
                if(total[0].checked){
                    document.getElementsByName("sports")[i].checked = true;
                    box.push(sportsBox[i].value);
                    document.getElementById("textarea").innerHTML = box;
                }
                // 전체 checked 가 false 일 경우 모든 항목 제거
                else{
                    document.getElementsByName("sports")[i].checked = false;
                    box.pop(sportsBox[i].value);
                    document.getElementById("textarea").innerHTML = box;
                }
            }
        }
    </script>
</body>
</html>
